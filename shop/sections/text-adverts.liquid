{%- if section.settings.enable_bar -%}
  {%- unless section.settings.home_page_only and template != 'index' -%}
    <section id="section-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="announcement-bar" class="section-text-adverts {% if section.settings.sticky and template == 'index'%} sticky {% endif %}">
      <div class="TextAdverts">
        <div class="main-carousel" data-flickity='{ "cellAlign": "left", "contain": true ,"pageDots": false,  "prevNextButtons": false }'>
           {% for block in section.blocks %}
            <div class="carousel-cell">
              <div class="TextAverts__block">
                <h2 class="TextAverts__title u-h6">{{ block.settings.title }}</h2>
                <h3 class="TextAverts__subtitle"><a href="{{ block.settings.url }}" class="{% if block.settings.url != blank %} underline {% endif %}">{{ block.settings.subtitle }}</a></h3>
              </div>
           </div>
          {% endfor %}
        </div>
      </div>
    </section>
    <style>
      #section-{{ section.id }} {
        background: {{ section.settings.background }};
        color: {{ section.settings.text_color }};
      }
    </style>
  {%- endunless -%}
{%- endif -%}

{% schema %}
{
  "name": "Text adverts",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_bar",
      "label": "Enable bar",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "home_page_only",
      "label": "Home page only",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "sticky",
      "label": "Sticky?",
      "default": true,
      "info": "only in homepage"
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Advert",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Title"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "subtitle"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link",
          "info": "Link in the subtitle"
        }
      ]
    }
  ]
}
{% endschema %}
